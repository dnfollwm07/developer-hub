## Tailwind CSS 架構與實作

**框架：** Tailwind CSS 3.3+  
**配置：** 基於 TypeScript 的配置與自訂主題  
**插件：** @tailwindcss/typography, tailwindcss-animate  
**整合：** Next.js 14 與 PostCSS

---

### 概述

全面的實用優先 CSS 框架實作，具備自訂主題配置、深色模式支援和優化的建置流程。專案展現進階 Tailwind CSS 模式，包括設計代幣、響應式工具和元件組合。

---

### 配置架構

#### **TypeScript 配置**

專案使用基於 TypeScript 的 Tailwind 配置以確保類型安全：

```typescript
// tailwind.config.ts
import type { Config } from 'tailwindcss';

const config: Config = {
  darkMode: ["class"],  // 基於類別的深色模式切換
  content: [
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        // 使用 CSS 變數的自訂顏色系統
        border: "hsl(var(--border))",
        background: "hsl(var(--background))",
        // ...
      },
    },
  },
  plugins: [
    require('tailwindcss-animate'),
    require('@tailwindcss/typography'),
  ],
};
```

**關鍵功能：**
- **內容掃描**：自動偵測指定目錄中的類別使用情況
- **類型安全**：TypeScript 確保配置正確性
- **插件系統**：具備社群插件的可擴展架構

#### **CSS 變數整合**

使用 CSS 變數的自訂設計系統，用於動態主題：

```css
/* styles/globals.css */
:root {
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --primary: 222.2 47.4% 11.2%;
  --border: 214.3 31.8% 91.4%;
  /* ... */
}

.dark {
  --background: 222.2 84% 4.9%;
  --foreground: 210 40% 98%;
  /* ... */
}
```

**優勢：**
- 無需重建即可在執行時切換主題
- 跨元件的一致顏色系統
- 輕鬆實作深色模式

---

### 實用優先方法

#### **類別組合**

專案利用 Tailwind 的實用類別進行快速開發：

```tsx
// 範例：具備漸層和響應式設計的英雄區塊
<section className="relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900">
  <div className="absolute inset-0 bg-grid-slate-100 [mask-image:linear-gradient(0deg,white,rgba(255,255,255,0.6))] dark:bg-grid-slate-800/25"></div>
  <div className="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 sm:py-32">
    {/* 內容 */}
  </div>
</section>
```

**模式：**
- **響應式設計**：`sm:`、`md:`、`lg:` 斷點前綴
- **深色模式**：`dark:` 變體用於主題感知樣式
- **任意值**：`[mask-image:...]` 用於一次性 CSS 屬性
- **偽類別**：`hover:`、`focus:`、`group-hover:` 用於互動

#### **類別合併工具**

用於條件類別組合的自訂 `cn` 工具：

```typescript
// lib/utils.ts
import { type ClassValue, clsx } from 'clsx';
import { twMerge } from 'tailwind-merge';

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

**使用方式：**
```tsx
<button className={cn(
  "px-4 py-2 rounded-lg",
  isActive && "bg-indigo-600 text-white",
  !isActive && "bg-slate-100 text-slate-700",
  className  // 允許屬性覆蓋
)}>
  點擊我
</button>
```

**優勢：**
- 智慧解決類別衝突
- 具備清晰語法的條件樣式
- 類型安全的類別組合

---

### 排版插件

#### **Prose 類別**

使用 `@tailwindcss/typography` 進行內容樣式：

```tsx
<article className="prose prose-slate dark:prose-invert max-w-none">
  <MDXRenderer source={content} />
</article>
```

**功能：**
- Markdown 內容的自動排版樣式
- 深色模式變體（`prose-invert`）
- 可使用修飾符類別自訂

#### **自訂排版比例**

擴展的排版配置：

```typescript
theme: {
  extend: {
    fontSize: {
      'xs': ['0.75rem', { lineHeight: '1rem' }],
      'sm': ['0.875rem', { lineHeight: '1.25rem' }],
      // 具備行高的自訂大小
    },
  },
}
```

---

### 動畫系統

#### **Tailwind Animate 插件**

用於 UI 互動的自訂動畫：

```typescript
// tailwind.config.ts
keyframes: {
  "accordion-down": {
    from: { height: "0" },
    to: { height: "var(--radix-accordion-content-height)" },
  },
  "accordion-up": {
    from: { height: "var(--radix-accordion-content-height)" },
    to: { height: "0" },
  },
},
animation: {
  "accordion-down": "accordion-down 0.2s ease-out",
  "accordion-up": "accordion-up 0.2s ease-out",
},
```

**使用方式：**
```tsx
<div className="animate-accordion-down">
  {/* 動畫內容 */}
</div>
```

---

### 響應式設計模式

#### **行動優先方法**

使用行動優先方法應用響應式工具：

```tsx
<div className="
  flex flex-col          // 行動裝置：欄位佈局
  sm:flex-row            // 小螢幕：列佈局
  gap-4                  // 基礎間距
  sm:gap-6               // 小螢幕上的更大間距
  px-4                   // 基礎內距
  sm:px-6                // 增加的內距
  lg:px-8                // 大螢幕上的更多內距
">
```

**斷點策略：**
- 行動裝置的基礎樣式（320px+）
- `sm:` 用於平板（640px+）
- `md:` 用於小桌面（768px+）
- `lg:` 用於桌面（1024px+）
- `xl:` 用於大螢幕（1280px+）

#### **容器查詢**

使用容器工具進行元件層級的響應式：

```tsx
<div className="container mx-auto px-4">
  {/* 限制在容器最大寬度的內容 */}
</div>
```

---

### 深色模式實作

#### **基於類別的切換**

透過根元素上的類別控制深色模式：

```typescript
// tailwind.config.ts
darkMode: ["class"],  // 啟用基於類別的深色模式
```

**實作：**
```tsx
// 切換深色模式
document.documentElement.classList.toggle('dark');
```

#### **主題感知元件**

元件自動適應主題：

```tsx
<div className="
  bg-white dark:bg-slate-900
  text-slate-900 dark:text-white
  border-slate-200 dark:border-slate-700
">
  {/* 主題感知內容 */}
</div>
```

---

### 建置優化

#### **PostCSS 配置**

```javascript
// postcss.config.js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};
```

**流程：**
1. Tailwind 掃描內容檔案以尋找類別使用情況
2. 僅使用已使用的工具生成優化的 CSS
3. Autoprefixer 新增供應商前綴
4. 生產環境中的最終 CSS 會被最小化

#### **清除策略**

自動移除未使用的 CSS：

```typescript
content: [
  './pages/**/*.{js,ts,jsx,tsx,mdx}',
  './components/**/*.{js,ts,jsx,tsx,mdx}',
  './app/**/*.{js,ts,jsx,tsx,mdx}',
],
```

**結果：**
- 最小的 CSS 打包大小
- 僅包含實際使用的類別
- 生產建置高度優化

---

### 元件模式

#### **可重用樣式化元件**

跨元件的一致樣式模式：

```tsx
// 按鈕變體
const buttonVariants = {
  primary: "bg-indigo-600 hover:bg-indigo-700 text-white",
  secondary: "bg-slate-100 hover:bg-slate-200 text-slate-900",
  outline: "border-2 border-slate-300 hover:border-indigo-600",
};

<button className={cn(
  "px-4 py-2 rounded-lg font-semibold transition-colors",
  buttonVariants[variant]
)}>
  {children}
</button>
```

#### **佈局工具**

常見的佈局模式：

```tsx
// 置中容器
<div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

// Flex 佈局
<div className="flex items-center justify-between gap-4">

// Grid 佈局
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
```

---

### 效能考量

#### **JIT 模式**

Tailwind 的即時編譯器：
- 按需生成 CSS
- 僅包含使用的工具
- 快速的開發建置
- 優化的生產輸出

#### **CSS 打包大小**

優化策略：
- **PurgeCSS**：自動移除未使用的類別
- **最小化**：生產 CSS 最小化
- **關鍵 CSS**：內嵌首屏內容的關鍵樣式

---

### 主要成就

- **一致的設計系統**：統一的調色板和間距比例
- **深色模式支援**：無縫的主題切換
- **響應式設計**：具備斷點工具的行動優先方法
- **效能**：使用 JIT 編譯的優化 CSS 打包
- **開發者體驗**：類型安全的配置和工具組合
- **可維護性**：實用優先方法減少自訂 CSS

